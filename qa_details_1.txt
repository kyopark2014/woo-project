이제 파일 내용을 확인했으니, 요청하신 "거래 조회 (부분환불) V2 (공통API)"에 대한 테스트 케이스를 작성하겠습니다.

# 거래 조회 (부분환불) V2 (공통API) 테스트 케이스

## 기본 정보
- **End Point**: /common-api/v2/customers/{customerNo}/manual-tx-histories
- **Path Parameters**: customerNo (거래처번호)
- **Request Parameters**: txDate, subKey, page, size
- **Request Header**: settle-user-type
- **Response**: 부분환불 관련 정산 정보

## 테스트 케이스

### 테스트 케이스 1: 기본 파라미터로 부분환불 거래 조회
**목적**: 필수 파라미터만 사용하여 부분환불 거래 조회가 정상적으로 작동하는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024-03-07"
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - HTTP 상태 코드: 200 OK
  - 응답에 부분환불 거래 목록이 포함됨
  - 각 거래의 settleAmountType이 "PARTIAL_REFUND"인지 확인

### 테스트 케이스 2: 특정 가게(subKey)의 부분환불 거래 조회
**목적**: 특정 가게의 부분환불 거래만 필터링하여 조회
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024-03-07", subKey = "12345"
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - HTTP 상태 코드: 200 OK
  - 응답에 해당 subKey를 가진 부분환불 거래만 포함됨

### 테스트 케이스 3: 페이지네이션 테스트
**목적**: 페이지네이션 기능이 정상적으로 작동하는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024-03-07", page = 0, size = 10
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - HTTP 상태 코드: 200 OK
  - 응답에 최대 10개의 거래 항목이 포함됨
  - totalPages, totalElements, page, size 필드가 올바르게 설정됨

### 테스트 케이스 4: 부분환불 거래의 정산기준조정금액 확인
**목적**: 부분환불 거래의 adjustAmounts 필드가 올바르게 반환되는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024-03-07"
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - HTTP 상태 코드: 200 OK
  - 응답의 content[].adjustAmounts가 비어있거나(emptyList) 올바른 형식으로 반환됨
  - 문서에 언급된 대로 부분환불은 주문금액을 기준으로 발생하므로 실제 데이터 발생이 없을 수 있음

### 테스트 케이스 5: 부분환불 거래의 결제수단 확인
**목적**: 부분환불 거래의 결제수단 정보가 올바르게 반환되는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024-03-07"
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - HTTP 상태 코드: 200 OK
  - 응답의 content[].payMethodAmounts[].code가 "REWARD"인지 확인 (문서에 따르면 부분환불은 REWARD만 존재)

### 테스트 케이스 6: 잘못된 거래처번호로 조회
**목적**: 존재하지 않는 거래처번호로 조회 시 적절한 오류 응답을 반환하는지 확인
- **입력**:
  - Path Parameter: customerNo = "999999999999" (존재하지 않는 번호)
  - Request Parameter: txDate = "2024-03-07"
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - 적절한 오류 코드와 메시지 반환

### 테스트 케이스 7: 필수 파라미터 누락 테스트
**목적**: 필수 파라미터(txDate)가 누락된 경우 적절한 오류 응답을 반환하는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: (txDate 누락)
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - 적절한 오류 코드와 메시지 반환

### 테스트 케이스 8: 잘못된 날짜 형식 테스트
**목적**: 잘못된 날짜 형식으로 요청 시 적절한 오류 응답을 반환하는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024/03/07" (잘못된 형식)
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - 적절한 오류 코드와 메시지 반환

### 테스트 케이스 9: 인증 헤더 누락 테스트
**목적**: 필수 헤더(settle-user-type)가 누락된 경우 적절한 오류 응답을 반환하는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024-03-07"
  - Request Header: (settle-user-type 누락)
- **예상 결과**:
  - 적절한 오류 코드와 메시지 반환

### 테스트 케이스 10: 최대 페이지 크기 초과 테스트
**목적**: 페이지 크기가 최대 허용치(300)를 초과할 때 적절히 처리되는지 확인
- **입력**:
  - Path Parameter: customerNo = "202305240722"
  - Request Parameter: txDate = "2024-03-07", size = 301
  - Request Header: settle-user-type = "example"
- **예상 결과**:
  - 적절한 오류 메시지 반환 또는 최대 허용치(300)로 제한하여 결과 반환

이상의 테스트 케이스는 "거래 조회 (부분환불) V2 (공통API)"의 다양한 시나리오를 검증하기 위해 설계되었습니다. 각 테스트 케이스는 API의 기능적 요구사항과 예외 처리를 확인하는 데 중점을 두고 있습니다.